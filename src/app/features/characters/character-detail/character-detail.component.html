<div class="container mx-auto p-4">
  <div *ngIf="isLoading" class="flex justify-center items-center h-40">
    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
  </div>

  <div *ngIf="loadError" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4">
    <span class="block sm:inline">Impossible de charger ce personnage.</span>
  </div>

  <div *ngIf="!isLoading && !loadError" class="flex flex-col lg:flex-row gap-4">
    <!-- Partie principale (fiche de personnage) -->
    <div class="lg:w-3/4">
      <div class="mb-4">
        <!-- OGL5 Character Sheet - conditionnellement affiché uniquement si c'est un personnage OGL5 -->
        <div *ngIf="isOgl5 && character">
          <app-ogl5-character-sheet
            [character]="character"
            (characterUpdated)="onCharacterUpdated($event)">
          </app-ogl5-character-sheet>
        </div>

        <!-- Custom Character Sheet - conditionnellement affiché uniquement si c'est un personnage Custom -->
        <div *ngIf="!isOgl5 && character">
          <!-- Décommentez cette section une fois que CustomCharacterSheetComponent est implémenté -->
          <!--
          <app-custom-character-sheet
            [character]="character"
            (characterUpdated)="onCharacterUpdated($event)">
          </app-custom-character-sheet>
          -->
          <p class="p-4 bg-yellow-100 text-yellow-800 rounded">
            Le support pour les fiches de personnages personnalisées est en cours de développement.
          </p>
        </div>
      </div>
    </div>

    <!-- Colonne latérale pour les notes -->
    <div class="lg:w-1/4 sticky top-4 h-fit">
      <app-character-notes
        [notes]="notes"
        [characterId]="characterId"
        [characterType]="characterType"
        (notesUpdated)="onNotesUpdated($event)">
      </app-character-notes>
    </div>
  </div>
</div>
